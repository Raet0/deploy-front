<main class="bg-base-100">
  <div class="w-full py-16 flex items-center justify-center">
    <div class="max-w-2xl px-4">
      <h2 class="mb-4 text-5xl font-bold text-center" id="profiles">Profiles</h2>
      <p class="mb-5 text-2xl text-center">
        Explora los perfiles disponibles y agenda una asesoría.
      </p>
    </div>
  </div>

  <section class="w-full py-16 bg-base-100">
    <div class="max-w-6xl mx-auto px-4">
      @if (loading()) {
      <p class="text-center text-base-content/60">Cargando perfiles...</p>
      } @else if (error()) {
      <p class="text-center text-error">{{ error() }}</p>
      } @else {
      <div class="grid grid-cols-1 md:grid-cols-2 gap-16 place-items-center">
        @for (p of profiles(); track p.id) {
        <div class="flex flex-col items-center text-center">
          <div class="group w-56 h-56 [perspective:1000px]">
            <div
              class="relative w-full h-full transition-transform duration-500 [transform-style:preserve-3d] group-hover:[transform:rotateY(180deg)]">
              <div class="absolute w-full h-full [backface-visibility:hidden]">
                <img
                  [src]="p.photoUrl || 'https://ui-avatars.com/api/?name=' + (p.name || 'User') + '&background=random&size=224'"
                  [alt]="p.name" class="w-56 h-56 object-cover rounded-full shadow-lg" />
              </div>
              <div
                class="absolute w-full h-full [backface-visibility:hidden] [transform:rotateY(180deg)] bg-base-300 dark:bg-base-700 rounded-full flex items-center justify-center p-6 shadow-lg">
                <p class="text-base-content text-sm font-semibold">
                  {{ p.description || 'Programador disponible para asesorías.' }}
                </p>
              </div>
            </div>
          </div>

          <p class="text-gray-600 dark:text-gray-400 mt-8 text-base">Hola, soy</p>
          <h2 class="text-3xl font-bold mt-1">{{ p.name }}</h2>
          <p class="text-base text-gray-500 dark:text-gray-400 mt-2 mb-6">
            {{ p.specialty }}
          </p>

          <div class="flex gap-3 flex-wrap justify-center">
            <a class="btn btn-neutral btn-sm" [routerLink]="['/programmers', p.id]">Ver perfil</a>
            <a class="btn btn-neutral btn-sm" [routerLink]="['/user']" [queryParams]="{ programmerId: p.id }">
              Agendar
            </a>
          </div>
        </div>
        } @empty {
        <p class="text-base-content/60 text-center">No hay programadores registrados.</p>
        }
      </div>
      }
    </div>
  </section>
</main>