import{b as _,c as d,d as F,e as N,h as E,i as R,j as D,n as k,p as L}from"./chunk-7NOJ4FLA.js";import{c as T}from"./chunk-Z4WB5FUE.js";import{$ as h,B as r,G as y,Ia as M,N as f,O as b,Ra as C,Sa as x,T as c,U as t,V as n,W as a,Ya as S,ba as w,ga as p,ha as v,ia as l,ja as P,o as g,v as m}from"./chunk-DDCXKO4N.js";function j(o,s){if(o&1&&(t(0,"div",4)(1,"span"),l(2),n()()),o&2){let i=w();r(2),P(i.successMessage())}}function A(o,s){if(o&1&&(t(0,"div",5)(1,"span"),l(2),n()()),o&2){let i=w();r(2),P(i.errorMessage())}}function q(o,s){o&1&&(t(0,"div",6),a(1,"div",20),n())}var V=class o{fb=g(k);authService=g(S);router=g(C);showPassword=m(!1);showConfirmPassword=m(!1);isLoading=m(!1);errorMsg=m("");successMsg=m("");registerForm=this.fb.group({name:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator.bind(this)});async onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{name:s,email:i,password:e}=this.registerForm.value;this.isLoading.set(!0),this.errorMsg.set(""),this.successMsg.set("");try{if(!await this.authService.register(s,i,e).toPromise()){this.errorMsg.set("No se pudo crear la cuenta");return}this.successMsg.set("Cuenta creada exitosamente. Redirigiendo..."),setTimeout(()=>this.router.navigate(["/user"]),1200)}catch(u){let G=u?.error?.error||"No se pudo crear la cuenta";this.errorMsg.set(G)}finally{this.isLoading.set(!1)}}togglePasswordVisibility(){this.showPassword.set(!this.showPassword())}toggleConfirmPasswordVisibility(){this.showConfirmPassword.set(!this.showConfirmPassword())}passwordMatchValidator(s){let i=s.get("password"),e=s.get("confirmPassword");return i&&e&&i.value!==e.value?(e?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}loading=()=>this.isLoading();errorMessage=()=>this.errorMsg();successMessage=()=>this.successMsg();get name(){return this.registerForm.get("name")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=y({type:o,selectors:[["app-register-page"]],decls:33,vars:19,consts:[[1,"flex","justify-center","items-center","min-h-screen","bg-base-200","text-base-content","font-sans","transition-colors","duration-300"],[1,"card","bg-base-100","p-12","rounded-[40px]","w-full","max-w-[400px]","text-center","shadow-xl"],[1,"text-3xl","font-bold","mb-2","text-base-content"],[1,"text-sm","text-base-content/60","mb-6"],["role","alert",1,"alert","alert-success","mb-6","p-2","text-sm","text-white","flex","justify-center","shadow-lg"],["role","alert",1,"alert","alert-error","mb-6","p-2","text-sm","text-white","flex","justify-center","shadow-lg"],[1,"flex","justify-center","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-5","text-left"],["formControlName","name","type","text","placeholder","Nombre completo",1,"input","w-full","p-4","rounded-[50px]","bg-base-200","text-base-content","placeholder-base-content/50","focus:outline-none","focus:ring-2","focus:ring-primary","transition-all","border-none"],["formControlName","email","type","email","placeholder","Email",1,"input","w-full","p-4","rounded-[50px]","bg-base-200","text-base-content","placeholder-base-content/50","focus:outline-none","focus:ring-2","focus:ring-primary","transition-all","border-none"],[1,"relative"],["formControlName","password","placeholder","Password",1,"input","w-full","p-4","rounded-[50px]","bg-base-200","text-base-content","placeholder-base-content/50","focus:outline-none","focus:ring-2","focus:ring-primary","transition-all","border-none","pr-12",3,"type"],["type","button",1,"absolute","right-4","top-1/2","-translate-y-1/2","btn","btn-ghost","btn-circle","btn-sm",3,"click"],[1,"mb-8","text-left"],["formControlName","confirmPassword","placeholder","Confirm Password",1,"input","w-full","p-4","rounded-[50px]","bg-base-200","text-base-content","placeholder-base-content/50","focus:outline-none","focus:ring-2","focus:ring-primary","transition-all","border-none","pr-12",3,"type"],["type","submit",1,"btn","w-full","py-4","mb-4","rounded-[50px]","bg-base-300","text-base-content","font-bold","tracking-wide","uppercase","hover:bg-base-content","hover:text-base-100","border-none","shadow-lg","transition-all","cursor-pointer","h-auto","min-h-[3rem]","disabled:opacity-70",3,"disabled"],[1,"text-sm","text-base-content/70"],[1,"inline"],["routerLink","/login",1,"link","link-primary","font-bold","no-underline","hover:text-primary-focus","cursor-pointer"],[1,"loading","loading-spinner","loading-md"]],template:function(i,e){i&1&&(t(0,"main"),a(1,"app-drawer"),t(2,"div",0)(3,"div",1)(4,"h2",2),l(5,"Crear cuenta"),n(),t(6,"p",3),l(7,"Reg\xEDstrate para continuar."),n(),f(8,j,3,1,"div",4),f(9,A,3,1,"div",5),f(10,q,2,0,"div",6),t(11,"form",7),h("ngSubmit",function(){return e.onSubmit()}),t(12,"div",8),a(13,"input",9),n(),t(14,"div",8),a(15,"input",10),n(),t(16,"div",8)(17,"div",11),a(18,"input",12),t(19,"button",13),h("click",function(){return e.togglePasswordVisibility()}),a(20,"i"),n()()(),t(21,"div",14)(22,"div",11),a(23,"input",15),t(24,"button",13),h("click",function(){return e.toggleConfirmPasswordVisibility()}),a(25,"i"),n()()(),t(26,"button",16),l(27," Crear cuenta "),n()(),t(28,"div",17)(29,"p",18),l(30,"Already have an account? "),n(),t(31,"a",19),l(32," Iniciar sesi\xF3n "),n()()()()()),i&2&&(r(8),b(e.successMessage()?8:-1),r(),b(e.errorMessage()?9:-1),r(),b(e.loading()?10:-1),r(),c("formGroup",e.registerForm),r(2),p("input-error",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),r(2),p("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),r(3),p("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),c("type",e.showPassword()?"text":"password"),r(2),v(e.showPassword()?"fa-solid fa-eye-slash":"fa-solid fa-eye"),r(3),p("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),c("type",e.showConfirmPassword()?"text":"password"),r(2),v(e.showConfirmPassword()?"fa-solid fa-eye-slash":"fa-solid fa-eye"),r(),c("disabled",e.loading()||e.registerForm.invalid))},dependencies:[x,T,M,L,E,_,F,N,R,D],encapsulation:2})};export{V as RegisterPage};
